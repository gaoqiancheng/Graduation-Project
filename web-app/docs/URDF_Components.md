# URDF (统一机器人描述格式) 组件说明

## 1. 基本组件

| 组件名称 | 必需性 | 主要属性 | 作用 | 说明 |
|---------|--------|----------|------|------|
| `robot` | 必需 | - name: 机器人名称<br>- version: 版本信息 | 作为URDF文件的根元素 | 每个URDF文件必须有且仅有一个robot元素 |
| `link` | 必需 | - name: 链接名称<br>- visual: 视觉属性<br>- collision: 碰撞属性<br>- inertial: 惯性属性 | 描述机器人的刚体部分 | 可以是机器人的任何物理部件，如手臂、底座等 |
| `joint` | 必需 | - name: 关节名称<br>- type: 关节类型<br>- parent: 父链接<br>- child: 子链接 | 定义link之间的连接关系 | 决定了机器人的运动能力和自由度 |

## 2. 关节类型

| 类型 | 自由度 | 运动特性 | 应用场景 |
|------|--------|----------|----------|
| `FIXED` | 0 | 固定不动 | 用于固定连接两个link |
| `REVOLUTE` | 1 | 有限角度旋转 | 常用于旋转关节，如机械臂关节 |
| `CONTINUOUS` | 1 | 无限旋转 | 适用于轮子等持续旋转部件 |
| `PRISMATIC` | 1 | 直线运动 | 用于滑动或伸缩机构 |
| `FLOATING` | 6 | 空间自由运动 | 用于表示完全自由的运动 |
| `PLANAR` | 2 | 平面内运动 | 适用于平面移动机构 |

## 3. 视觉和物理属性

| 属性类型 | 必需性 | 子元素 | 作用 | 说明 |
|----------|--------|--------|------|------|
| `visual` | 可选 | - origin: 位置和方向<br>- geometry: 几何形状<br>- material: 材质 | 定义外观 | 用于3D显示，不影响物理仿真 |
| `collision` | 可选 | - origin: 位置和方向<br>- geometry: 几何形状 | 定义碰撞检测形状 | 用于物理仿真，可与视觉形状不同 |
| `inertial` | 可选 | - origin: 重心位置<br>- mass: 质量<br>- inertia: 惯性矩阵 | 定义物理特性 | 用于动力学计算和物理仿真 |

## 4. 几何形状选项

| 形状类型 | 参数 | 适用场景 | 特点 |
|----------|------|----------|------|
| `box` | - size: 长宽高 | 规则的长方体部件 | 简单、计算效率高 |
| `cylinder` | - radius: 半径<br>- length: 长度 | 圆柱形部件 | 适用于轴、杆等部件 |
| `sphere` | - radius: 半径 | 球形部件 | 适用于关节球等 |
| `mesh` | - filename: 文件路径<br>- scale: 缩放比例 | 复杂形状部件 | 可导入外部3D模型 |

## 5. 位置和方向（origin）

| 属性 | 格式 | 说明 | 用途 |
|------|------|------|------|
| `xyz` | [x, y, z] | 三维空间坐标 | 定义部件在空间中的位置 |
| `rpy` | [roll, pitch, yaw] | 欧拉角 | 定义部件的旋转姿态 |

## 6. 材质属性

| 属性 | 类型 | 说明 | 用途 |
|------|------|------|------|
| `color` | RGBA | 颜色和透明度 | 定义基本颜色 |
| `texture` | 文件路径 | 纹理图片 | 定义复杂表面效果 |

## 7. 常见关系约束

| 关系类型 | 表示方式 | 含义 | 示例 |
|----------|----------|------|------|
| 1..* | 一对多（必需） | 至少要有一个 | robot必须包含至少一个link |
| 0..* | 零对多（可选） | 可以有任意多个 | link可以有多个visual |
| 0..1 | 零对一（可选） | 最多只能有一个 | link最多有一个inertial |
| 1 | 一对一（必需） | 必须有且仅有一个 | visual必须有一个geometry |

## 8. 最佳实践建议

1. **命名规范**
   - 使用有意义的名称
   - 保持命名一致性
   - 避免特殊字符

2. **结构组织**
   - 从基座开始构建
   - 保持层级结构清晰
   - 合理划分link和joint

3. **性能优化**
   - 简化碰撞几何体
   - 适当使用简单形状
   - 优化mesh模型

4. **调试技巧**
   - 先测试基本运动
   - 逐步添加复杂特性
   - 注意检查坐标系

## 9. 常见问题解决

| 问题类型 | 可能原因 | 解决方案 |
|----------|----------|----------|
| 显示异常 | - 坐标系设置错误<br>- 几何体缺失 | - 检查origin设置<br>- 确认文件路径 |
| 运动异常 | - 关节类型不当<br>- 限位设置错误 | - 确认关节类型<br>- 检查limit值 |
| 碰撞检测问题 | - 碰撞体积不合适<br>- 位置偏移 | - 调整collision几何体<br>- 检查origin偏移 | 